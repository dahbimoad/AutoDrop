<ui:FluentWindow
    x:Class="AutoDrop.Views.Windows.DuplicateHandlingDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="File Already Exists"
    Width="500"
    Height="420"
    MinWidth="400"
    MinHeight="350"
    WindowStartupLocation="CenterOwner"
    ResizeMode="NoResize"
    ExtendsContentIntoTitleBar="True"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <ui:TitleBar Grid.Row="0" Title="File Already Exists" />

        <!-- Content -->
        <ScrollViewer Grid.Row="1" Padding="24,12">
            <StackPanel>
                <!-- Warning Icon and Message -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                    <ui:SymbolIcon 
                        Symbol="Warning24" 
                        FontSize="32"
                        Foreground="{DynamicResource SystemFillColorCautionBrush}"
                        Margin="0,0,12,0" />
                    <TextBlock 
                        Text="A file with the same name already exists in the destination folder."
                        TextWrapping="Wrap"
                        VerticalAlignment="Center"
                        FontSize="14" />
                </StackPanel>

                <!-- File Name -->
                <Border 
                    Background="{DynamicResource ControlFillColorDefaultBrush}"
                    CornerRadius="4"
                    Padding="12"
                    Margin="0,0,0,16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <ui:SymbolIcon Symbol="Document24" FontSize="24" Margin="0,0,12,0" />
                        <TextBlock 
                            Grid.Column="1"
                            x:Name="FileNameText"
                            Text="filename.txt"
                            FontWeight="SemiBold"
                            TextTrimming="CharacterEllipsis"
                            VerticalAlignment="Center" />
                    </Grid>
                </Border>

                <!-- Comparison Info -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!-- Source File -->
                    <Border 
                        Background="{DynamicResource ControlFillColorDefaultBrush}"
                        CornerRadius="4"
                        Padding="12">
                        <StackPanel>
                            <TextBlock Text="Source File" FontWeight="SemiBold" Margin="0,0,0,8" />
                            <TextBlock x:Name="SourceSizeText" Text="Size: --" Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                            <TextBlock x:Name="SourceDateText" Text="Modified: --" Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                    </Border>

                    <ui:SymbolIcon 
                        Grid.Column="1" 
                        Symbol="ArrowRight24" 
                        FontSize="20"
                        Margin="12,0"
                        VerticalAlignment="Center" />

                    <!-- Destination File -->
                    <Border 
                        Grid.Column="2"
                        Background="{DynamicResource ControlFillColorDefaultBrush}"
                        CornerRadius="4"
                        Padding="12">
                        <StackPanel>
                            <TextBlock Text="Existing File" FontWeight="SemiBold" Margin="0,0,0,8" />
                            <TextBlock x:Name="DestSizeText" Text="Size: --" Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                            <TextBlock x:Name="DestDateText" Text="Modified: --" Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Match Status -->
                <Border 
                    x:Name="MatchStatusBorder"
                    Background="{DynamicResource SystemFillColorSuccessBackgroundBrush}"
                    CornerRadius="4"
                    Padding="12"
                    Margin="0,0,0,16"
                    Visibility="Collapsed">
                    <StackPanel Orientation="Horizontal">
                        <ui:SymbolIcon Symbol="Checkmark24" Margin="0,0,8,0" />
                        <TextBlock x:Name="MatchStatusText" Text="Files are identical (same content)" />
                    </StackPanel>
                </Border>

                <!-- Options -->
                <TextBlock Text="What would you like to do?" FontWeight="SemiBold" Margin="0,0,0,12" />

                <StackPanel>
                    <ui:Button 
                        x:Name="KeepBothButton"
                        Appearance="Secondary"
                        HorizontalAlignment="Stretch"
                        Margin="0,0,0,8"
                        Click="OnKeepBothClick">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="DocumentCopy24" Margin="0,0,8,0" />
                            <TextBlock Text="Keep Both (rename new file)" />
                        </StackPanel>
                    </ui:Button>

                    <ui:Button 
                        x:Name="ReplaceButton"
                        Appearance="Secondary"
                        HorizontalAlignment="Stretch"
                        Margin="0,0,0,8"
                        Click="OnReplaceClick">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="ArrowSwap24" Margin="0,0,8,0" />
                            <TextBlock Text="Replace existing file" />
                        </StackPanel>
                    </ui:Button>

                    <ui:Button 
                        x:Name="SkipButton"
                        Appearance="Secondary"
                        HorizontalAlignment="Stretch"
                        Margin="0,0,0,8"
                        Click="OnSkipClick">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="DismissCircle24" Margin="0,0,8,0" />
                            <TextBlock Text="Skip this file" />
                        </StackPanel>
                    </ui:Button>

                    <ui:Button 
                        x:Name="DeleteSourceButton"
                        Appearance="Secondary"
                        HorizontalAlignment="Stretch"
                        Visibility="Collapsed"
                        Click="OnDeleteSourceClick">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="Delete24" Margin="0,0,8,0" />
                            <TextBlock Text="Delete source (files are identical)" />
                        </StackPanel>
                    </ui:Button>
                </StackPanel>

                <!-- Apply to all checkbox -->
                <CheckBox 
                    x:Name="ApplyToAllCheckBox"
                    Content="Apply this action to all remaining duplicates"
                    Margin="0,16,0,0"
                    Visibility="Collapsed" />
            </StackPanel>
        </ScrollViewer>

        <!-- Cancel Button -->
        <Border 
            Grid.Row="2" 
            Padding="24,12"
            Background="{DynamicResource ControlFillColorDefaultBrush}">
            <ui:Button 
                Content="Cancel"
                HorizontalAlignment="Right"
                Click="OnCancelClick" />
        </Border>
    </Grid>
</ui:FluentWindow>
